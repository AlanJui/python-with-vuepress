(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{379:function(a,s,n){"use strict";n.r(s);var e=n(40),l=Object(e.a)({},(function(){var a=this,s=a.$createElement,n=a._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[n("h1",{attrs:{id:"lua-環境建置指引"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#lua-環境建置指引"}},[a._v("#")]),a._v(" Lua 環境建置指引")]),a._v(" "),n("p",[a._v("Ref URL: https://www.lua.org/manual/5.4/readme.html")]),a._v(" "),n("h2",{attrs:{id:"building-lua"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#building-lua"}},[a._v("#")]),a._v(" Building Lua")]),a._v(" "),n("ol",[n("li",[a._v("Download source.")])]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("$ wget https://luarocks.org/releases/luarocks-X.Y.Z.tar.gz\n$ tar zxpf luarocks-X.Y.Z.tar.gz\n$ la lua-X.Y.Z\n總計 24\ndrwxr-xr-x 4 alanjui alanjui 4096 11月 13 23:42 .\ndrwxr-xr-x 3 alanjui alanjui 4096  2月 19 21:44 ..\ndrwxr-xr-x 2 alanjui alanjui 4096 11月 13 23:35 doc\n-rw-r--r-- 1 alanjui alanjui 3146 11月 11 04:54 Makefile\n-rw-r--r-- 1 alanjui alanjui  151 11月 13 23:42 README\ndrwxr-xr-x 2 alanjui alanjui 4096 11月 13 23:33 src\n$ cd luarocks-X.Y.Z\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[a._v("Make sure build platform.")])]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("make help\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br")])]),n("p",[a._v("The platforms currently supported are:")]),a._v(" "),n("ul",[n("li",[a._v("guess")]),a._v(" "),n("li",[a._v("aix")]),a._v(" "),n("li",[a._v("bsd")]),a._v(" "),n("li",[a._v("c89")]),a._v(" "),n("li",[a._v("freebsd")]),a._v(" "),n("li",[a._v("generic")]),a._v(" "),n("li",[a._v("linux")]),a._v(" "),n("li",[a._v("linux-readline")]),a._v(" "),n("li",[a._v("macosx")]),a._v(" "),n("li",[a._v("mingw")]),a._v(" "),n("li",[a._v("posix")]),a._v(" "),n("li",[a._v("solaris")])]),a._v(" "),n("ol",{attrs:{start:"3"}},[n("li",[a._v("Build from source code.")])]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("make linux-readline\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br")])]),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("alanjui@VB01-Debian-10:~/build/lua-5.4.2$ make linux-readline\nmake[1]: Entering directory '/home/alanjui/build/lua-5.4.2/src'\nmake all SYSCFLAGS=\"-DLUA_USE_LINUX -DLUA_USE_READLINE\" SYSLIBS=\"-Wl,-E -ldl -lreadline\"\nmake[2]: Entering directory '/home/alanjui/build/lua-5.4.2/src'\nmake[2]: Nothing to be done for 'all'.\nmake[2]: Leaving directory '/home/alanjui/build/lua-5.4.2/src'\nmake[1]: Leaving directory '/home/alanjui/build/lua-5.4.2/src'\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br")])]),n("p",[a._v("The compilation takes only a few moments and produces three files in the\nsrc directory:")]),a._v(" "),n("ul",[n("li",[a._v("lua (the interpreter),")]),a._v(" "),n("li",[a._v("luac (the compiler),")]),a._v(" "),n("li",[a._v("liblua.a (the library).")])]),a._v(" "),n("ol",{attrs:{start:"4"}},[n("li",[a._v("To check that Lua has bben built correctly.")])]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("make test\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br")])]),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("alanjui@VB01-Debian-10:~/build/lua-5.4.2$ make test\nmake[1]: Entering directory '/home/alanjui/build/lua-5.4.2/src'\n./lua -v\nLua 5.4.2  Copyright (C) 1994-2020 Lua.org, PUC-Rio\nmake[1]: Leaving directory '/home/alanjui/build/lua-5.4.2/src'\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br")])]),n("h2",{attrs:{id:"installing-lua"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#installing-lua"}},[a._v("#")]),a._v(" Installing Lua")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("sudo make linux-readline install\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br")])]),n("h3",{attrs:{id:"install-lua-locally"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#install-lua-locally"}},[a._v("#")]),a._v(" Install Lua locally")]),a._v(" "),n("p",[a._v('To install Lua locally after building it, do "make local". This will create\na directory install with subdirectories bin, include, lib, man, share, and\ninstall Lua as listed below.')]),a._v(" "),n("ul",[n("li",[a._v("bin:\n"),n("ul",[n("li",[a._v("lua")]),a._v(" "),n("li",[a._v("luac")])])]),a._v(" "),n("li",[a._v("include:\n"),n("ul",[n("li",[a._v("lua.h")]),a._v(" "),n("li",[a._v("luaconf.h")]),a._v(" "),n("li",[a._v("lualib.h")]),a._v(" "),n("li",[a._v("lauxlib.h")]),a._v(" "),n("li",[a._v("lua.hpp")])])]),a._v(" "),n("li",[a._v("lib:\n"),n("ul",[n("li",[a._v("liblua.a")])])]),a._v(" "),n("li",[a._v("man/man1:\n"),n("ul",[n("li",[a._v("lua.1")]),a._v(" "),n("li",[a._v("luac.1")])])])]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("make linux-readline local\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br")])]),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("alanjui@VB01-Debian-10:~/build/lua-5.4.2$ make linux-readline local\nmake[1]: Entering directory '/home/alanjui/build/lua-5.4.2/src'\nmake all SYSCFLAGS=\"-DLUA_USE_LINUX -DLUA_USE_READLINE\" SYSLIBS=\"-Wl,-E -ldl -lreadline\"\nmake[2]: Entering directory '/home/alanjui/build/lua-5.4.2/src'\nmake[2]: Nothing to be done for 'all'.\nmake[2]: Leaving directory '/home/alanjui/build/lua-5.4.2/src'\nmake[1]: Leaving directory '/home/alanjui/build/lua-5.4.2/src'\nmake install INSTALL_TOP=../install\nmake[1]: Entering directory '/home/alanjui/build/lua-5.4.2'\ncd src && mkdir -p ../install/bin ../install/include ../install/lib ../install/man/man1 ../install/share/lua/5.4 ../install/lib/lua/5.4\ncd src && install -p -m 0755 lua luac ../install/bin\ncd src && install -p -m 0644 lua.h luaconf.h lualib.h lauxlib.h lua.hpp ../install/include\ncd src && install -p -m 0644 liblua.a ../install/lib\ncd doc && install -p -m 0644 lua.1 luac.1 ../install/man/man1\nmake[1]: Leaving directory '/home/alanjui/build/lua-5.4.2'\n\nalanjui@VB01-Debian-10:~/build/lua-5.4.2$ la\n總計 28\ndrwxr-xr-x 5 alanjui alanjui 4096  2月 19 21:28 .\ndrwxr-xr-x 6 alanjui alanjui 4096  2月 18 19:40 ..\ndrwxr-xr-x 2 alanjui alanjui 4096 11月 13 23:35 doc\ndrwxr-xr-x 7 alanjui alanjui 4096  2月 19 21:28 install\n-rw-r--r-- 1 alanjui alanjui 3146 11月 11 04:54 Makefile\n-rw-r--r-- 1 alanjui alanjui  151 11月 13 23:42 README\ndrwxr-xr-x 2 alanjui alanjui 4096  2月 18 19:40 src\n\nalanjui@VB01-Debian-10:~/build/lua-5.4.2$ la install\n總計 28\ndrwxr-xr-x 7 alanjui alanjui 4096  2月 19 21:28 .\ndrwxr-xr-x 5 alanjui alanjui 4096  2月 19 21:28 ..\ndrwxr-xr-x 2 alanjui alanjui 4096  2月 19 21:28 bin\ndrwxr-xr-x 2 alanjui alanjui 4096  2月 19 21:28 include\ndrwxr-xr-x 3 alanjui alanjui 4096  2月 19 21:28 lib\ndrwxr-xr-x 3 alanjui alanjui 4096  2月 19 21:28 man\ndrwxr-xr-x 3 alanjui alanjui 4096  2月 19 21:28 share\n\nalanjui@VB01-Debian-10:~/build/lua-5.4.2$ tree install\ninstall\n├── bin\n│   ├── lua\n│   └── luac\n├── include\n│   ├── lauxlib.h\n│   ├── luaconf.h\n│   ├── lua.h\n│   ├── lua.hpp\n│   └── lualib.h\n├── lib\n│   ├── liblua.a\n│   └── lua\n│       └── 5.4\n├── man\n│   └── man1\n│       ├── lua.1\n│       └── luac.1\n└── share\n    └── lua\n        └── 5.4\n\n10 directories, 10 files\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br"),n("span",{staticClass:"line-number"},[a._v("12")]),n("br"),n("span",{staticClass:"line-number"},[a._v("13")]),n("br"),n("span",{staticClass:"line-number"},[a._v("14")]),n("br"),n("span",{staticClass:"line-number"},[a._v("15")]),n("br"),n("span",{staticClass:"line-number"},[a._v("16")]),n("br"),n("span",{staticClass:"line-number"},[a._v("17")]),n("br"),n("span",{staticClass:"line-number"},[a._v("18")]),n("br"),n("span",{staticClass:"line-number"},[a._v("19")]),n("br"),n("span",{staticClass:"line-number"},[a._v("20")]),n("br"),n("span",{staticClass:"line-number"},[a._v("21")]),n("br"),n("span",{staticClass:"line-number"},[a._v("22")]),n("br"),n("span",{staticClass:"line-number"},[a._v("23")]),n("br"),n("span",{staticClass:"line-number"},[a._v("24")]),n("br"),n("span",{staticClass:"line-number"},[a._v("25")]),n("br"),n("span",{staticClass:"line-number"},[a._v("26")]),n("br"),n("span",{staticClass:"line-number"},[a._v("27")]),n("br"),n("span",{staticClass:"line-number"},[a._v("28")]),n("br"),n("span",{staticClass:"line-number"},[a._v("29")]),n("br"),n("span",{staticClass:"line-number"},[a._v("30")]),n("br"),n("span",{staticClass:"line-number"},[a._v("31")]),n("br"),n("span",{staticClass:"line-number"},[a._v("32")]),n("br"),n("span",{staticClass:"line-number"},[a._v("33")]),n("br"),n("span",{staticClass:"line-number"},[a._v("34")]),n("br"),n("span",{staticClass:"line-number"},[a._v("35")]),n("br"),n("span",{staticClass:"line-number"},[a._v("36")]),n("br"),n("span",{staticClass:"line-number"},[a._v("37")]),n("br"),n("span",{staticClass:"line-number"},[a._v("38")]),n("br"),n("span",{staticClass:"line-number"},[a._v("39")]),n("br"),n("span",{staticClass:"line-number"},[a._v("40")]),n("br"),n("span",{staticClass:"line-number"},[a._v("41")]),n("br"),n("span",{staticClass:"line-number"},[a._v("42")]),n("br"),n("span",{staticClass:"line-number"},[a._v("43")]),n("br"),n("span",{staticClass:"line-number"},[a._v("44")]),n("br"),n("span",{staticClass:"line-number"},[a._v("45")]),n("br"),n("span",{staticClass:"line-number"},[a._v("46")]),n("br"),n("span",{staticClass:"line-number"},[a._v("47")]),n("br"),n("span",{staticClass:"line-number"},[a._v("48")]),n("br"),n("span",{staticClass:"line-number"},[a._v("49")]),n("br"),n("span",{staticClass:"line-number"},[a._v("50")]),n("br"),n("span",{staticClass:"line-number"},[a._v("51")]),n("br"),n("span",{staticClass:"line-number"},[a._v("52")]),n("br"),n("span",{staticClass:"line-number"},[a._v("53")]),n("br"),n("span",{staticClass:"line-number"},[a._v("54")]),n("br"),n("span",{staticClass:"line-number"},[a._v("55")]),n("br"),n("span",{staticClass:"line-number"},[a._v("56")]),n("br"),n("span",{staticClass:"line-number"},[a._v("57")]),n("br"),n("span",{staticClass:"line-number"},[a._v("58")]),n("br"),n("span",{staticClass:"line-number"},[a._v("59")]),n("br"),n("span",{staticClass:"line-number"},[a._v("60")]),n("br")])]),n("p",[a._v('To install Lua locally, but in some other directory,\ndo "make install INSTALL_TOP=xxx", where xxx is your chosen directory.\nThe installation starts in the src and doc directories, so take care\nif INSTALL_TOP is not an absolute path.')]),a._v(" "),n("h3",{attrs:{id:"install-lua-golbally"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#install-lua-golbally"}},[a._v("#")]),a._v(" Install Lua golbally")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("sudo make linux-readline install INSTALL_TOP=/usr\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br")])]),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("alanjui@VB01-Debian-10:~/build/lua-5.4.2$ sudo make linux-readline install INSTALL_TOP=/usr\nmake[1]: Entering directory '/home/alanjui/build/lua-5.4.2/src'\nmake all SYSCFLAGS=\"-DLUA_USE_LINUX -DLUA_USE_READLINE\" SYSLIBS=\"-Wl,-E -ldl -lreadline\"\nmake[2]: Entering directory '/home/alanjui/build/lua-5.4.2/src'\nmake[2]: Nothing to be done for 'all'.\nmake[2]: Leaving directory '/home/alanjui/build/lua-5.4.2/src'\nmake[1]: Leaving directory '/home/alanjui/build/lua-5.4.2/src'\ncd src && mkdir -p /usr/bin /usr/include /usr/lib /usr/man/man1 /usr/share/lua/5.4 /usr/lib/lua/5.4\ncd src && install -p -m 0755 lua luac /usr/bin\ncd src && install -p -m 0644 lua.h luaconf.h lualib.h lauxlib.h lua.hpp /usr/include\ncd src && install -p -m 0644 liblua.a /usr/lib\ncd doc && install -p -m 0644 lua.1 luac.1 /usr/man/man1\nalanjui@VB01-Debian-10:~/build/lua-5.4.2$\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br"),n("span",{staticClass:"line-number"},[a._v("12")]),n("br"),n("span",{staticClass:"line-number"},[a._v("13")]),n("br")])]),n("p",[a._v("These are the only directories you need for development. If you only want\nto run Lua programs, you only need the files in bin and man. The files in\ninclude and lib are needed for embedding Lua in C or C++ programs.")]),a._v(" "),n("h2",{attrs:{id:"customization"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#customization"}},[a._v("#")]),a._v(" Customization")]),a._v(" "),n("p",[a._v("Three kinds of things can be customized by editing a file:")]),a._v(" "),n("ul",[n("li",[a._v("Where and how to install Lua — edit Makefile.")]),a._v(" "),n("li",[a._v("How to build Lua — edit src/Makefile.")]),a._v(" "),n("li",[a._v("Lua features — edit src/luaconf.h.")])]),a._v(" "),n("p",[a._v("You don't actually need to edit the Makefiles because you may set the relevant\nvariables in the command line when invoking make. Nevertheless, it's probably\nbest to edit and save the Makefiles to record the changes you've made.")]),a._v(" "),n("p",[a._v("On the other hand, if you need to customize some Lua features, you'll need to\nedit src/luaconf.h before building and installing Lua. The edited file will be\nthe one installed, and it will be used by any Lua clients that you build, to\nensure consistency. Further customization is available to experts by editing\nthe Lua sources.")]),a._v(" "),n("h2",{attrs:{id:"configuration-for-alternatives-infrastructure"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#configuration-for-alternatives-infrastructure"}},[a._v("#")]),a._v(" Configuration for alternatives infrastructure")]),a._v(" "),n("h3",{attrs:{id:"install-lua-options-for-alternatives-infrastructure"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#install-lua-options-for-alternatives-infrastructure"}},[a._v("#")]),a._v(" Install lua options for alternatives infrastructure")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("$ sudo cp /usr/bin/lua /usr/bin/lua5.4\n$ sudo cp /usr/bin/luac /usr/bin/luac5.4\n$ cd /usr/man/man1\n$ sudo gzip lua.1\n$ sudo gzip luac.1\n$ sudo cp lua.1.gz /usr/share/man/man1/lua5.4.2.gz\n$ sudo cp luac.1.gz /usr/share/man/man1/luac5.4.2.gz\n\n$ sudo update-alternatives \\\n  --install /usr/bin/lua lua-interpreter /usr/bin/lua5.4 130 \\\n  --slave /usr/share/man/man1/lua.1.gz lua-manual /usr/share/man/man1/lua5.4.2.gz\n\n$ sudo update-alternatives \\\n  --install /usr/bin/luac lua-compiler /usr/bin/luac5.4 130 \\\n  --slave /usr/share/man/man1/luac.1.gz lua-compiler-manual /usr/share/man/man1/luac5.4.2.gz\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br"),n("span",{staticClass:"line-number"},[a._v("12")]),n("br"),n("span",{staticClass:"line-number"},[a._v("13")]),n("br"),n("span",{staticClass:"line-number"},[a._v("14")]),n("br"),n("span",{staticClass:"line-number"},[a._v("15")]),n("br")])]),n("h3",{attrs:{id:"change-default-lua-interpreter-compiler"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#change-default-lua-interpreter-compiler"}},[a._v("#")]),a._v(" Change default Lua Interpreter / Compiler")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("$ sudo update-alternatives --config lua-interpreter\n\n$ sudo update-alternatives --config lua-compiler\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br")])]),n("h3",{attrs:{id:"remove-option-for-alternatives-infrastructure"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#remove-option-for-alternatives-infrastructure"}},[a._v("#")]),a._v(" Remove option for alternatives infrastructure")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("$ sudo update-alternatives --remove lua-interpreter /usr/share/lua/5.4/lua\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br")])]),n("h2",{attrs:{id:"install-lua-support-for-vim-neovim"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#install-lua-support-for-vim-neovim"}},[a._v("#")]),a._v(" Install Lua Support for Vim/Neovim")]),a._v(" "),n("h3",{attrs:{id:"install-lua-language-server"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#install-lua-language-server"}},[a._v("#")]),a._v(" Install Lua Language Server")]),a._v(" "),n("p",[a._v("Ref: https://emacs-lsp.github.io/lsp-mode/page/lsp-lua-language-server/")]),a._v(" "),n("ol",[n("li",[a._v("Install ninja")])]),a._v(" "),n("p",[a._v("Debian/Ubuntu:")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("sudo apt install ninja-build\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br")])]),n("p",[a._v("ArchLinux:")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("sudo pacman -S ninja\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br")])]),n("p",[a._v("macOS:")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("brew install ninja\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[n("p",[a._v("Make sure you have C++17")])]),a._v(" "),n("li",[n("p",[a._v("Clone project")])])]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("git clone https://github.com/sumneko/lua-language-server\ncd lua-language-server\ngit submodule update --init --recursive\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br")])]),n("ol",{attrs:{start:"4"}},[n("li",[a._v("Build")])]),a._v(" "),n("p",[a._v("Linux:")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("cd 3rd/luamake\nninja -f ninja/linux.ninja\ncd ../..\n./3rd/luamake/luamake rebuild\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br")])]),n("p",[a._v("macOS:")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("cd 3rd/luamake\nninja -f ninja/macos.ninja\ncd ../..\n./3rd/luamake/luamake rebuild\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br")])]),n("ol",{attrs:{start:"5"}},[n("li",[a._v("Run")])]),a._v(" "),n("p",[a._v("Linux:")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("./bin/Linux/lua-language-server -E ./main.lua\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br")])]),n("p",[a._v("macOS:")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("mv ~/build/lua-language-server ~/.local/share/\ncd ~/.local/share/lua-language-server\n./bin/macOS/lua-language-server -E ./main.lua\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br")])]),n("ol",{attrs:{start:"6"}},[n("li",[a._v("Install")])]),a._v(" "),n("p",[a._v("Linux:")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("mv ~/build/lua-language-server ~/.local/share/\ncd ~/.local/share/lua-language-server/bin/Linux\ncp * ../\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br")])]),n("p",[a._v("macOS:")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("mv ~/build/lua-language-server ~/.local/share/\ncd ~/.local/share/lua-language-server/bin/macOS\ncp * ../\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br")])]),n("h3",{attrs:{id:"install-lua-language-server-support-for-vim"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#install-lua-language-server-support-for-vim"}},[a._v("#")]),a._v(" Install lua language server support for vim")]),a._v(" "),n("ol",[n("li",[n("p",[a._v("Start Vim 8 / Neovim 0.5")])]),a._v(" "),n("li",[n("p",[a._v("透過 coc-nvim 執行安裝指令：")])])]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v(":CocInstall coc-lua\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br")])]),n("ol",{attrs:{start:"3"}},[n("li",[a._v("設定 Lua Language Server Path")])]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v(":CocConfig\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br")])]),n("p",[a._v("【註】：等同 "),n("code",[a._v("nvim ~/.config/nvim/coc-settings.json")]),a._v(" 或\n"),n("code",[a._v("vim ~/.vim/coc-settings.json")]),a._v(" 。")]),a._v(" "),n("p",[a._v("coc-settings.json")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v('{\n    ....\n    "languageserver": {\n        "bash": {\n            ....\n        },\n        "lua": {\n            "command": "~/.local/share/lua-language-server/bin/lua-language-server",\n            "args": [\n              "-E",\n              "-e",\n              "LANG=en",\n              "~/.local/share/lua-language-server/main.lua"\n            ],\n            "filetypes": ["lua"],\n            "trace.server": "verbose"\n        }\n    },\n    ....\n}\n')])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br"),n("span",{staticClass:"line-number"},[a._v("12")]),n("br"),n("span",{staticClass:"line-number"},[a._v("13")]),n("br"),n("span",{staticClass:"line-number"},[a._v("14")]),n("br"),n("span",{staticClass:"line-number"},[a._v("15")]),n("br"),n("span",{staticClass:"line-number"},[a._v("16")]),n("br"),n("span",{staticClass:"line-number"},[a._v("17")]),n("br"),n("span",{staticClass:"line-number"},[a._v("18")]),n("br"),n("span",{staticClass:"line-number"},[a._v("19")]),n("br"),n("span",{staticClass:"line-number"},[a._v("20")]),n("br")])]),n("h3",{attrs:{id:"verify"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#verify"}},[a._v("#")]),a._v(" Verify")]),a._v(" "),n("ol",[n("li",[a._v("Editing source code")])]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("cd ~/.vim/lua\nvim testLua.lua\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[a._v("Run")])]),a._v(" "),n("p",[a._v("Presss key: [Space][a][t] to open a floating window for terminal.")]),a._v(" "),n("p",[a._v("Entering commad below:")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("lua testLua.lua\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br")])]),n("p",[a._v("Entering "),n("code",[a._v("exit")]),a._v(" command to close terminal window and return to vim editor.")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("exit\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br")])])])}),[],!1,null,null,null);s.default=l.exports}}]);